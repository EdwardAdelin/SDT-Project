@startuml
title SkillHub - Integrated UML Class Diagram (Final Consistent Version)

' ---------------------------
' Singleton Pattern
' ---------------------------
class ConfigurationManager {
    - instance: ConfigurationManager
    - dbUrl: String
    - dbUser: String
    - dbPassword: String
    + getInstance(): ConfigurationManager
    + getDbConnection(): DatabaseConnection
}
note right of ConfigurationManager
<<Singleton Pattern>>
Ensures one shared instance for configuration and DB access
end note

' ---------------------------
' Factory Method Pattern - Users
' ---------------------------
abstract class User {
    - id: int
    - name: String
    + login()
    + logout()
}

class Client extends User {
    + postJob(job: Job)
    + reviewProposals(job: Job)
}

class Freelancer extends User {
    + createProposal(job: Job, rate: double, desc: String): Proposal
    + submitProposal(job: Job, proposal: Proposal)
    + receiveJobAlert(job: Job)
}

interface UserFactory {
    + createUser(name: String): User
}
class ConcreteUserFactory implements UserFactory {
    + createUser(name: String): User
}
note right of UserFactory
<<Factory Method Pattern>>
Creates Client or Freelancer objects without exposing logic
end note

' ---------------------------
' Factory Method Pattern - Jobs
' ---------------------------
abstract class Job {
    - id: int
    - title: String
    - description: String
    - budget: double
}
class FixedPriceJob extends Job
class HourlyJob extends Job

interface JobFactory {
    + createJob(type: String, title: String): Job
}
class ConcreteJobFactory implements JobFactory
note right of JobFactory
<<Factory Method Pattern>>
Creates FixedPriceJob or HourlyJob
end note

' ---------------------------
' Builder Pattern
' ---------------------------
class JobBuilder {
    - job: Job
    + setTitle(title: String): JobBuilder
    + setDescription(desc: String): JobBuilder
    + setBudget(budget: double): JobBuilder
    + build(): Job
}
note right of JobBuilder
<<Builder Pattern>>
Builds Job objects step by step
end note

' ---------------------------
' Facade Pattern
' ---------------------------
class NotificationFacade {
    + sendJobAlert(job: Job, freelancers: List<Freelancer>)
    + sendProposalUpdate(proposal: Proposal, client: Client)
}
class EmailService {
    + sendEmail(to: String, subject: String, body: String)
}
class SMSService {
    + sendSMS(to: String, message: String)
}
note right of NotificationFacade
<<Facade Pattern>>
Simplifies access to EmailService and SMSService
end note

' ---------------------------
' Application Service Layer
' ---------------------------
class JobService {
    + postJob(job: Job)
    + notifyFreelancers(job: Job)
}

' ---------------------------
' Other Entities
' ---------------------------
class Proposal {
    - id: int
    - freelancer: Freelancer
    - job: Job
    - rate: double
    - description: String
}

' ---------------------------
' Relationships
' ---------------------------
Client --> Job : posts
Freelancer --> Proposal : submits
Proposal --> Job : for
JobBuilder --> Job : builds
UserFactory --> User : creates
ConcreteUserFactory --> UserFactory
ConcreteJobFactory --> JobFactory
NotificationFacade --> EmailService : uses
NotificationFacade --> SMSService : uses
JobService --> NotificationFacade : uses
JobService --> ConfigurationManager : uses

@enduml
